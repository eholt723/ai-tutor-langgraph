<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Tutor - TinyLlama + LoRA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="glow_round_favicon.png">

  <style>
    :root {
      --bg-color: #f3f4f6;
      --text-color: #111827;
      --panel-bg: #ffffff;
      --panel-border: #e5e7eb;
      --subtle-text: #6b7280;
      --badge-bg: #f9fafb;
      --badge-border: #d1d5db;
      --badge-text: #4b5563;
      --button-bg: #111827;
      --button-text: #f9fafb;
      --textarea-bg: #ffffff;
      --shadow-color: rgba(15, 23, 42, 0.10);
      --status-online-bg: #ecfdf3;
      --status-online-border: #bbf7d0;
      --status-online-text: #166534;
      --status-offline-bg: #fef2f2;
      --status-offline-border: #fecaca;
      --status-offline-text: #991b1b;
    }

    body.dark {
      --bg-color: #020617;
      --text-color: #e5e7eb;
      --panel-bg: #020617;
      --panel-border: #1f2937;
      --subtle-text: #9ca3af;
      --badge-bg: #020617;
      --badge-border: #334155;
      --badge-text: #e5e7eb;
      --button-bg: #e5e7eb;
      --button-text: #020617;
      --textarea-bg: #020617;
      --shadow-color: rgba(15, 23, 42, 0.60);
      --status-online-bg: #022c22;
      --status-online-border: #064e3b;
      --status-online-text: #6ee7b7;
      --status-offline-bg: #450a0a;
      --status-offline-border: #7f1d1d;
      --status-offline-text: #fecaca;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 32px 16px;
      background: var(--bg-color);
      color: var(--text-color);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* ---------- PAGE DESCRIPTION (FIXED ONLY ON LARGE DESKTOPS) ---------- */

    .page-description {
      position: static;
      max-width: 960px;
      width: 100%;
      margin: 0 auto 16px auto;
      font-size: 0.85rem;
      color: var(--subtle-text);
      line-height: 1.4;
      background: var(--badge-bg);
      border: 1px solid var(--panel-border);
      border-radius: 12px;
      padding: 12px 14px;
    }

    @media (min-width: 1400px) and (min-height: 800px) {
      .page-description {
        position: fixed;
        top: 12px;
        left: 16px;
        max-width: 440px;
        margin: 0;
        background: transparent;
        border: none;
        padding: 0;
        border-radius: 0;
        z-index: 10;
      }
    }

    .app {
      max-width: 960px;
      width: 100%;
      background: var(--panel-bg);
      border-radius: 16px;
      box-shadow: 0 18px 40px var(--shadow-color);
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 24px;
      border: 1px solid var(--panel-border);
    }

    .header {
      display: flex;
      flex-direction: column;
      gap: 4px;
      border-bottom: 1px solid var(--panel-border);
      padding-bottom: 12px;
    }

    .title-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    h1 {
      font-size: 1.4rem;
      margin: 0;
    }

    .subtitle {
      font-size: 0.9rem;
      color: var(--subtle-text);
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .badge {
      font-size: 0.75rem;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--badge-border);
      background: var(--badge-bg);
      color: var(--badge-text);
    }

    .status {
      font-size: 0.8rem;
      padding: 2px 8px;
      border-radius: 999px;
    }

    .status-online {
      background: var(--status-online-bg);
      color: var(--status-online-text);
      border: 1px solid var(--status-online-border);
    }

    .status-offline {
      background: var(--status-offline-bg);
      color: var(--status-offline-text);
      border: 1px solid var(--status-offline-border);
    }

    .theme-toggle {
      font-size: 0.8rem;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid var(--panel-border);
      background: transparent;
      cursor: pointer;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 12px;
    }

    .toggle-group {
      display: inline-flex;
      border-radius: 999px;
      border: 1px solid var(--panel-border);
      overflow: hidden;
    }

    .toggle-group button {
      padding: 6px 12px;
      border: none;
      background: transparent;
      cursor: pointer;
      font-size: 0.85rem;
      color: var(--subtle-text);
    }

    .toggle-group button.active {
      background: var(--button-bg);
      color: var(--button-text);
    }

    textarea {
      width: 100%;
      min-height: 120px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--panel-border);
      background: var(--textarea-bg);
      color: var(--text-color);
      resize: vertical;
    }

    .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    button.primary {
      border-radius: 999px;
      border: none;
      padding: 8px 20px;
      font-size: 0.9rem;
      background: var(--button-bg);
      color: var(--button-text);
      cursor: pointer;
    }

    .hint {
      font-size: 0.8rem;
      color: var(--subtle-text);
    }

    .output {
      border-radius: 12px;
      border: 1px solid var(--panel-border);
      background: var(--badge-bg);
      padding: 12px 14px;
      max-height: 340px;
      overflow: auto;
    }

    .page-footer {
      position: fixed;
      right: 16px;
      bottom: 8px;
      font-size: 0.75rem;
      color: var(--subtle-text);
    }

    @media (max-width: 900px) {
      .page-description { display: none; }
      .actions { flex-direction: column; }
      button.primary { width: 100%; }
    }
  </style>
</head>

<body>
  <div class="page-description">
    <strong>Note:</strong> The backend is hosted in an Azure Container App with low idle replicas,
    so it may take 5â€“30 seconds to spool up after inactivity.
    <br><br>
    This demo compares base TinyLlama vs a LoRA-fine-tuned tutor model.
    <br><br>
    <strong>Phase 1:</strong> Single-container CPU inference using GGUF + LoRA.
    <br><br>
    <strong>Phase 2:</strong> LangGraph, RAG, multi-step tutoring, and evaluation tooling.
  </div>

  <div class="app">
    <header class="header">
      <div class="title-row">
        <div>
          <h1>AI Tutor â€“ TinyLlama + LoRA</h1>
          <div class="subtitle">Compare base vs fine-tuned tutor behavior</div>
        </div>
        <div class="badge-row">
          <span class="badge">Azure Container Apps</span>
          <span class="badge">TinyLlama-1.1B</span>
          <span class="badge">LoRA Adapter</span>
          <span class="status status-offline" id="status-indicator">Checking backend...</span>
          <button class="theme-toggle" id="theme-toggle">ðŸŒ™ Dark</button>
        </div>
      </div>
    </header>

    <section class="controls">
      <div class="row">
        <div>
          <label>Model mode</label>
          <div class="toggle-group" id="mode-toggle">
            <button data-mode="base" class="active">Base</button>
            <button data-mode="finetuned">Fine-tuned</button>
          </div>
        </div>
      </div>

      <textarea id="question-input" placeholder="Ask a programming questionâ€¦"></textarea>

      <div class="actions">
        <button class="primary" id="ask-button">Ask the tutor</button>
        <div class="hint">Try the same question in both modes</div>
      </div>
    </section>

    <section class="output" id="output-panel" style="display:none;">
      <pre id="output-body"></pre>
    </section>
  </div>

  <div class="page-footer">Created by Eric Holt</div>
</body>
</html>
